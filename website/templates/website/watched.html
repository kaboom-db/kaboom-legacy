{% load static %}

{% if exists %}
<svg id="poster_watched" width="720" height="460" viewBox="0 0 720 460" xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <style>
            text,
            tspan {
                font-family: 'Montserrat', sans-serif;
                fill: rgb(0, 0, 0);
            }

            tspan {
                fill: rgb(10, 10, 10) !important;
                font-size: 80%;
            }
        </style>
        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:rgb(255,95,109);stop-opacity:1" />
            <stop offset="100%" style="stop-color:rgba(255,195,113,1);stop-opacity:1" />
        </linearGradient>
    </defs>

    <g id="image">
        <rect x="0" y="0" width="100%" height="88%" fill="url(#grad1)" />
        <image x="0" y="0" width="100%" xlink:href="{{ last_watched_image }}" />
    </g>

    <g id="text">
        <rect x="0" y="88%" width="100%" height="12%" fill="url(#grad1)" />

        <image y="88%" width="8%" xlink:href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgc29kaXBvZGk6ZG9jbmFtZT0ibG9nby5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMS4xICgzYmY1YWUwZDI1LCAyMDIxLTA5LTIwLCBjdXN0b20pIgogICBpZD0ic3ZnMjE5IgogICB2ZXJzaW9uPSIxLjEiCiAgIHZpZXdCb3g9IjAgMCAxMjgwIDEyODAiCiAgIGhlaWdodD0iMzM4LjY2NjY2bW0iCiAgIHdpZHRoPSIzMzguNjY2NjZtbSIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczIxMyIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaW5rc2NhcGU6c25hcC1ub2Rlcz0idHJ1ZSIKICAgICBpbmtzY2FwZTpzbmFwLXNtb290aC1ub2Rlcz0idHJ1ZSIKICAgICBpbmtzY2FwZTpzbmFwLWludGVyc2VjdGlvbi1wYXRocz0idHJ1ZSIKICAgICBpbmtzY2FwZTpvYmplY3QtcGF0aHM9InRydWUiCiAgICAgaW5rc2NhcGU6Z3VpZGUtYmJveD0idHJ1ZSIKICAgICBzaG93Z3VpZGVzPSJ0cnVlIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjY1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIxMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDAxIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iOTQxIgogICAgIGlua3NjYXBlOnNob3dwYWdlc2hhZG93PSJmYWxzZSIKICAgICBmaXQtbWFyZ2luLWJvdHRvbT0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXRvcD0iMCIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtcm90YXRpb249IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIyIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjeT0iMTcwNCIKICAgICBpbmtzY2FwZTpjeD0iNjMyIgogICAgIGlua3NjYXBlOnpvb209IjAuMTI1IgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIHBhZ2Vjb2xvcj0iIzI2MjYyNiIKICAgICBpZD0iYmFzZSIKICAgICBpbmtzY2FwZTpwYWdlY2hlY2tlcmJvYXJkPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTIxNiI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgICA8ZGM6dGl0bGUgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iQ29udGVudHMiCiAgICAgaWQ9ImxheWVyMiIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIj4KICAgIDxnCiAgICAgICBpZD0iZzIzNDciCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgyLjg3NDc4OTUsMCwwLDIuODc0Nzg5NSwtMTk5LjYwNTgzLC0xNTc2Ljc4NjUpIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjE0NC45Nzg2MSIKICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxNDQuOTc4NjEiCiAgICAgICBzdHlsZT0iZmlsbDojZjJmMmYyO2ZpbGwtb3BhY2l0eToxIj4KICAgICAgPHBhdGgKICAgICAgICAgZD0ibSAyNDAuNjgzMiw3MTkuNzM3NjIgdiAzNC4yNDk5NyAzNC4yNSAzNC4yNSBoIDM0LjI1IHYgLTM0LjI1IC04LjU2MjUgaCAzNC4yNSB2IC0xNy4xMjUgaCAtMzQuMjUgdiAtOC41NjI1IC0zNC4yNDk5NyB6IG0gNjguNSw0Mi44MTI0NyBoIDM0LjI1IHYgLTQyLjgxMjQ3IGggLTM0LjI1IHogbSAwLDE3LjEyNSB2IDQyLjgxMjUgaCAzNC4yNSB2IC00Mi44MTI1IHoiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmMmYyZjI7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuMTE4MDM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICAgIGlkPSJwYXRoMjI5NSIgLz4KICAgICAgPHBhdGgKICAgICAgICAgZD0ibSAxNzIuMTgzMiw2NTEuMjM3NjIgdiAzNC4yNSAzNC4yNSAzNC4yNDk5NyAzNC4yNSAzNC4yNSAzNC4yNSAxNy4xMjUgaCAxNy4xMjUgdiAxNy4xMjUgaCAxNy4xMjUgMTcxLjI1IDM0LjI1IHYgLTM0LjI1IC0zNC4yNSAtMzQuMjUgLTM0LjI1IC0zNC4yNDk5NyAtMzQuMjUgLTE3LjEyNSBoIC0xNy4xMjUgdiAtMTcuMTI1IGggLTE3LjEyNSAtMTcxLjI1IHogbSAzNC4yNSwzNC4yNSBoIDE3MS4yNSB2IDM0LjI1IDM0LjI0OTk3IDM0LjI1IDM0LjI1IDM0LjI1IGggLTE3MS4yNSB2IC0zNC4yNSAtMzQuMjUgLTM0LjI1IC0zNC4yNDk5NyB6IgogICAgICAgICBzdHlsZT0iZmlsbDojZjJmMmYyO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lIgogICAgICAgICBpZD0icGF0aDIyOTciCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2MiIC8+CiAgICA8L2c+CiAgPC9nPgogIDxpbmtzY2FwZTp0ZW1wbGF0ZWluZm8+CiAgICA8aW5rc2NhcGU6bmFtZT5EYXJrIENhbnZhczwvaW5rc2NhcGU6bmFtZT4KICAgIDxpbmtzY2FwZTpkYXRlPjIwMjAtMDctMTM8L2lua3NjYXBlOmRhdGU+CiAgPC9pbmtzY2FwZTp0ZW1wbGF0ZWluZm8+CiAgPGlua3NjYXBlOnRlbXBsYXRlaW5mbz4KICAgIDxpbmtzY2FwZTpuYW1lPkRhcmsgQmFja2dyb3VuZDwvaW5rc2NhcGU6bmFtZT4KICAgIDxpbmtzY2FwZTpkYXRlPjIwMjAtMDctMTQ8L2lua3NjYXBlOmRhdGU+CiAgPC9pbmtzY2FwZTp0ZW1wbGF0ZWluZm8+Cjwvc3ZnPgo=" />

        <text x="10%" y="92.8%" fill="#000" font-size="14" dominant-baseline="bottom" text-anchor="left">
            {{ username }} last watched
        </text>
        <text x="10%" y="97.5%" fill="#000" font-size="22" dominant-baseline="bottom" text-anchor="left">
            {{ last_watched_title }}
            <tspan dx="7">
                {{ episode_nr }}
            </tspan>
        </text>
    </g>

</svg>
{% else %}
<p>User does not exist.</p>
{% endif %}